<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">

<head>
    <meta charset="UTF-8" />
    <title>Add Employee</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>
</head>
<div class="container">
    <h3 class="mt-3">Create New Employee</h3>
    <br>

    <form id="frm-insert">
        <label>First Name:</label><input type="text" name="firstName"></br>
        <label>Last Name:</label><input type="text" name="lastName"></br>
        <label>E-Mail Address:</label><input type="text" name="emailId"></br>
        <label>Phone No:</label><input type="text" name="phoneNo"></br></br>
        <label>Salary:</label><input type="text" name="salary"></br></br>
        <label>Position:</label><input type="text" name="position"></br></br>

        <button class="btn btn-success" type="submit">Save</button>
    </form>
</div>

</html>

<script>
    $('#frm-insert').submit(function (event) {
        alert('inside function');
        event.preventDefault();

        //use this technique for ajax data if not using RESTFul
        //NOTE: this will capture the name attribute (not id) in our form
        // var formData = $(this).serialize();

        console.log($("#frm-insert").serialize());  // check using console to make sure all the form data values are correctly serialized

        $.ajax({
            type: "POST",
            url: "http://localhost:8080/employees",
            data: {
                firstName: "jep",
                lastName: "jep",
                emailId: "j@a.com",
                phoneNo: "0122222222",
                salary: "5000",
                position: "Manager"
            },
            dataType: "json",

            success: function (data, status, xhr) {
                if (data.rowcount > 0) {
                    alert('ok, successfully add data');
                    appendList(data);
                }
                else {
                    alert('fail to insert, ' + data.errormessage);
                }
            },

            error: function () {
                alert('Error' + status.log);
            }
        });
    });

</script>